<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.citic.server.gdjg.mapper.MM57_kzqqMapper">
	<delete id="delBr57_kzqq" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">  
  		<![CDATA[ delete from br57_kzqq where docno=#{docno} ]]>
	</delete>
	<delete id="delBr57_kzqq_mx" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">  
  		<![CDATA[ delete from br57_kzqq_mx where docno=#{docno} ]]>
	</delete>
	<delete id="delBr57_kzqq_mx_policeman" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">  
  		<![CDATA[ delete from br57_kzqq_mx_policeman where docno=#{docno} ]]>
	</delete>
	<delete id="delBr57_kzqq_back" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">  
  		<![CDATA[ delete from br57_kzqq_back where docno=#{docno} ]]>
	</delete>
	<delete id="delBr57_kzqq_input" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">  
  		<![CDATA[ delete from br57_kzqq_input where docno=#{docno} ]]>
	</delete>


	<insert id="insertBr57_kzqq" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">
		<![CDATA[insert into br57_kzqq(docno,caseno,exeunit,applyorg,targetorg,casetype,
		remark,sendtime,casename,datasource,status,orgkey,qrydt,recipient_p,recipient_time,last_up_dt)
		values(
		#{docno},#{caseno},#{exeunit},#{applyorg},#{targetorg},#{casetype},
		#{remark},#{sendtime},#{casename},#{datasource},#{status},#{orgkey},#{qrydt},
		#{recipient_p},#{recipient_time},#{last_up_dt})]]>
	</insert>

	<insert id="insertBr57_kzqq_mx_policeman" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_mx_policeman">
		<![CDATA[insert into br57_kzqq_mx_policeman(docno,caseno,exename,policecert,policetel,qrydt)
		values(
		#{docno},#{caseno},#{exename},#{policecert},#{policetel},#{qrydt})]]>
	</insert>

	<insert id="insertBr57_kzqq_mx" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_mx">
		<![CDATA[insert into br57_kzqq_mx(docno,caseno,uniqueid,type,name,idtype,id,qrydt,orgkey)
		values(
		#{docno},#{caseno},#{uniqueid},#{type},#{name},#{idtype},#{id},#{qrydt},#{orgkey})]]>
	</insert>
	<insert id="insertBr57_kzqq_back" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_back">
		<![CDATA[insert into br57_kzqq_back(docno,caseno,uniqueid,
		account,froseq,oldfroseq,thawseq,type,name,idtype,id,qrydt,
		status,last_up_dt,kzfkjg,feedback_time,feedback_p,czsbyy,dealing_time,dealing_p,msgcheckresult,
		orgkey,queryresult,reason,querytime)
		values(
		#{docno},#{caseno},#{uniqueid},#{account},#{froseq},#{oldfroseq},#{thawseq},
		#{type},#{name},#{idtype},#{id},#{qrydt},#{status},#{last_up_dt},
		#{kzfkjg},#{feedback_time},#{feedback_p},#{czsbyy},#{dealing_time},#{dealing_p},#{msgcheckresult},
		#{orgkey},#{queryresult},#{reason},#{querytime})]]>
	</insert>
	<insert id="insertBr57_kzqq_input" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input">
		<![CDATA[insert into br57_kzqq_input(docno,caseno,uniqueid,froseq,oldfroseq,account,currency,exchangetype,
		frotype,fromode,frobanlance,freezeappdate,frostartdate,froenddate,notifydoc,docnum,istransee,qrydt,exeunit,
		thawseq,thawmode,thawbanlance,unfreezeappdate,thawdate,idtype,id,oldseq,stoppayment
		)
		values(
		#{docno},#{caseno},#{uniqueid},#{froseq},#{oldfroseq},#{account},#{currency},#{exchangetype},
		#{frotype},#{fromode},#{frobanlance},#{freezeappdate},#{frostartdate},#{froenddate},#{notifydoc},
		#{docnum},#{istransee},#{qrydt},#{exeunit},#{thawseq},#{thawmode},#{thawbanlance},
		#{unfreezeappdate},#{thawdate},#{idtype},#{id},#{oldseq},#{stoppayment})
		]]>
	</insert>

	<delete id="delBr57_kzqq_back_freezeresult" parameterType="com.citic.server.service.domain.MC21_task_fact">  
  		<![CDATA[ delete from Br57_kzqq_back_freezeresult where uniqueid=#{bdhm} and docno=#{taskobj}]]>
	</delete>
	<delete id="delBr57_kzqq_back_unfreezeresult" parameterType="com.citic.server.service.domain.MC21_task_fact">  
  		<![CDATA[ delete from Br57_kzqq_back_unfreezeresult where uniqueid=#{bdhm} and docno=#{taskobj}]]>
	</delete>
	<delete id="delBr57_kzqq_back_stoppayment" parameterType="com.citic.server.service.domain.MC21_task_fact">  
  		<![CDATA[ delete from Br57_kzqq_back_stoppayment where uniqueid=#{bdhm} and docno=#{taskobj}]]>
	</delete>

	<select id="selectBr57_kzqq_mxByVo" parameterType="com.citic.server.gdjg.domain.Br57_kzqq"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_mx">
		select * from br57_kzqq_mx where uniqueid = #{uniqueid} and docno =
		#{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</select>
	<select id="selectBr57_kzqq_mx_policemanByVo" parameterType="com.citic.server.gdjg.domain.Br57_kzqq"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_mx_policeman">
		select * from br57_kzqq_mx_policeman where caseno = #{caseno}
		<if test="docno != null  and docno != '' ">
			and docno = #{docno}
		</if>
	</select>
	<select id="selectBr57_kzqq_backByVo" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_back">
		select * from br57_kzqq_back where account =#{account} and uniqueid =
		#{uniqueid} and docno = #{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</select>
	<select id="selectBr57_kzqq_inputByVo" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_mx"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_input">
		select * from br57_kzqq_input where uniqueid = #{uniqueid} and docno =
		#{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</select>



	<insert id="batchInsertBr57_kzqq_back_FreezeResult"
		parameterType="java.util.ArrayList">
		insert into Br57_kzqq_back_FreezeResult(
		docno,caseno,uniqueid,froseq,account,
		cardno,banlance,canbanlance,currency,
		exchangetype,frotype,fromode,froflag,
		frobanlance_1,frobanlance_2,frobanlance_3,frobanlance,
		frostartdate,froenddate,memo,beforefro,beforefroban,
		beforefrodate,servicetime,servicedoc,replytime,
		replydoc,filetype,qrydt,fronumber,accname
		) values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item.docno},#{item.caseno},#{item.uniqueid},#{item.froseq},#{item.account},
			#{item.cardno},#{item.banlance},#{item.canbanlance},#{item.currency},
			#{item.exchangetype},#{item.frotype},#{item.fromode},#{item.froflag},
			#{item.frobanlance_1},#{item.frobanlance_2},#{item.frobanlance_3},#{item.frobanlance},
			#{item.frostartdate},#{item.froenddate},#{item.memo},#{item.beforefro},#{item.beforefroban},
			#{item.beforefrodate},#{item.servicetime},#{item.servicedoc},#{item.replytime},
			#{item.replydoc},#{item.filetype},#{item.qrydt},#{item.fronumber},#{item.accname}
			)
		</foreach>
	</insert>

	<insert id="batchInsertBr57_kzqq_back_UnfreezeResult"
		parameterType="java.util.ArrayList">
		insert into
		Br57_kzqq_back_UnfreezeResult(
		docno,caseno,uniqueid,thawseq,account,cardno,currency,exchangetype,thawmode,thawflag,thawbanlance,
		thawdate,memo,servicetime,servicedoc,replytime,replydoc,filetype,qrydt,fronumber,accname
		) values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item.docno},#{item.caseno},#{item.uniqueid},#{item.thawseq},#{item.account},
			#{item.cardno},#{item.currency},#{item.exchangetype},#{item.thawmode},#{item.thawflag},
			#{item.thawbanlance},#{item.thawdate},#{item.memo},#{item.servicetime},#{item.servicedoc},
			#{item.replytime},#{item.replydoc},#{item.filetype},#{item.qrydt},#{item.fronumber},#{item.accname}
			)
		</foreach>
	</insert>
	<insert id="batchInsertBr57_kzqq_back_StopPaymentResult"
		parameterType="java.util.ArrayList">
		insert into
		Br57_kzqq_back_StopPayment(
		docno,caseno,uniqueid,account,cardno,exeresult,startdate,memo,qrydt,fronumber
		)
		values
		<foreach collection="list" item="item" index="index"
			separator=",">
			(
			#{item.docno},#{item.caseno},#{item.uniqueid},#{item.account},#{item.cardno},#{item.exeresult},
			#{item.startdate},#{item.memo},#{item.qrydt},#{item.fronumber}
			)
		</foreach>
	</insert>

	<update id="updateBr57_kzqq_back" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_back">
		update br57_kzqq_back
		<set>
			<if test="kzfkjg != null and kzfkjg != ''">
				kzfkjg=#{kzfkjg},
			</if>
			<if test="czsbyy != null and czsbyy != ''">
				czsbyy=#{czsbyy},
			</if>
			<if test="status != null and status != ''">
				status=#{status}
			</if>
		</set>
		<where>
			<if test="docno != null and docno != ''">
				docno=#{docno}
			</if>
			<if test="caseno != null and caseno != ''">
				and caseno=#{caseno}
			</if>
			<if test="uniqueid != null and uniqueid != ''">
				and uniqueid=#{uniqueid}
			</if>
		</where>
	</update>

	<select id="getBr57_kzqqList" parameterType="String"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq">
		<![CDATA[select * from br57_kzqq where docno=#{docno}]]>
	</select>
	<select id="getBr57_kzqq_mxList" parameterType="com.citic.server.gdjg.domain.Br57_kzqq"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_mx">
		select * from br57_kzqq_mx where docno = #{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</select>



	<select id="getBr57_kzqq_back_FreezeAcc" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		select * from br57_kzqq_back_FreezeResult where uniqueid =
		#{uniqueid}
		and caseno = #{caseno} and docno = #{docno}
	</select>


	<select id="getBr57_kzqq_back_FreezeAccByMx" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_mx"
		resultType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		select * from br57_kzqq_back_FreezeResult where uniqueid = #{uniqueid}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
		<if test="docno != null  and docno != '' ">
			and docno = #{docno}
		</if>
	</select>



	<select id="getBr57_kzqq_back_UnfreezeAcc" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		select * from br57_kzqq_back_UnfreezeResult where uniqueid
		=#{uniqueid}
		and caseno = #{caseno} and docno = #{docno}

	</select>


	<select id="getBr57_kzqq_back_UnFreezeAccByMx" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		select * from br57_kzqq_back_UnfreezeResult where uniqueid
		=#{uniqueid}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
		<if test="docno != null  and docno != '' ">
			and docno = #{docno}
		</if>
	</select>

	<select id="getBr57_kzqq_back_StoppaymentAcc" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		select * from br57_kzqq_back_Stoppayment where uniqueid =
		#{uniqueid}
		and caseno = #{caseno} and docno = #{docno}
	</select>

	<select id="getBr57_kzqq_back" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_mx"
		resultType="com.citic.server.gdjg.domain.Br57_kzqq_back">
		select * from Br57_kzqq_back where
		uniqueid = #{uniqueid}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
		<if test="docno != null  and docno != '' ">
			and docno = #{docno}
		</if>
	</select>

	<insert id="insertBr57_receipt" parameterType="com.citic.server.gdjg.domain.Br57_receipt">
		<![CDATA[insert into Br57_receipt(receiptkey,docno,packetkey,receipt_status_cd,resultinfo,qrydt)
		values(
		#{receiptkey},#{docno},#{packetkey},#{receipt_status_cd},#{resultinfo},#{qrydt}
		)]]>
	</insert>
	<update id="updateBr57_kzqq" parameterType="com.citic.server.gdjg.domain.Br57_kzqq">
         <![CDATA[update br57_kzqq  set status=#{status},last_up_dt=#{last_up_dt}
          where docno=#{docno}]]>
	</update>
	<select id="getBr57_kzqq_backCount" parameterType="String"
		resultType="java.lang.Integer">
		<![CDATA[select count(1) from br57_kzqq_back where docno = #{_parameter} and status ='0']]>
	</select>

	<select id="getSuccessBackDocnoByFreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select docno from br57_kzqq_back where kzfkjg ='01' and
		uniqueid = #{uniqueid} and froseq = #{oldfroseq}
	</select>

	<select id="getFroNumberByFreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select fronumber from br57_kzqq_input where froseq = #{oldfroseq}
	</select>
	<update id="updateBr57_kzqq_inputByFreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input">
		update br57_kzqq_input set fronumber=#{fronumber} where froseq =
		#{froseq}
		<if test="docno != null and docno != ''">
			and docno=#{docno}
		</if>
		<if test="caseno != null and caseno != ''">
			and caseno=#{caseno}
		</if>
		<if test="uniqueid != null and uniqueid != ''">
			and uniqueid=#{uniqueid}
		</if>
	</update>


    <select id="getSuccessBackDocnoByUnfreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select docno from br57_kzqq_back where kzfkjg ='01' and
		uniqueid = #{uniqueid} and froseq = #{oldfroseq}
	</select>
	<select id="getFroNumberByUnfreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select fronumber from br57_kzqq_input where froseq = #{oldfroseq}
	</select>

	<update id="updateBr57_kzqq_inputByUnfreeze" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input">
		update br57_kzqq_input set fronumber=#{fronumber} where thawseq =
		#{thawseq}
		<if test="docno != null and docno != ''">
			and docno=#{docno}
		</if>
		<if test="caseno != null and caseno != ''">
			and caseno=#{caseno}
		</if>
		<if test="uniqueid != null and uniqueid != ''">
			and uniqueid=#{uniqueid}
		</if>
	</update>

	<select id="getFroNumberByJjzf" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		<![CDATA[select fronumber from br57_kzqq_input where froseq = #{oldseq}]]>
	</select>
	<update id="updateBr57_kzqq_inputByJjzf" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input">
		update br57_kzqq_input set fronumber=#{fronumber} where froseq =
		#{froseq}
		<if test="docno != null and docno != ''">
			and docno=#{docno}
		</if>
		<if test="caseno != null and caseno != ''">
			and caseno=#{caseno}
		</if>
		<if test="uniqueid != null and uniqueid != ''">
			and uniqueid=#{uniqueid}
		</if>
	</update>

	<update id="updateBr57_kzqq_back_freezeResult"
		parameterType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		update br57_kzqq_back_FreezeResult set replydoc=#{replydoc} where
		account = #{account} and uniqueid = #{uniqueid} and docno = #{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</update>

	<update id="updateBr57_kzqq_back_unfreezeResult"
		parameterType="com.citic.server.gdjg.domain.request.Gdjg_Request_AccCx">
		update br57_kzqq_back_UnfreezeResult set replydoc=#{replydoc} where
		uniqueid = #{uniqueid} and docno = #{docno}
		<if test="caseno != null  and caseno != '' ">
			and caseno = #{caseno}
		</if>
	</update>

	<select id="selectNum_FreezeTask" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="java.lang.Integer">
		select count(*) from br57_kzqq_input where froseq =
		#{froseq} and uniqueid = #{uniqueid} and caseno = #{caseno}
	</select>

	<select id="selectNum_UnFreezeTask" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="java.lang.Integer">
		select count(*) from br57_kzqq_input where thawseq =
		#{thawseq} and uniqueid = #{uniqueid} and caseno = #{caseno}
	</select>

	<select id="selectStatus_PreFreezeTask" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select kzfkjg from br57_kzqq_back where froseq = #{froseq}
		and uniqueid = #{uniqueid} and caseno = #{caseno}
		and docno != #{docno}
	</select>

	<select id="selectStatus_PreUnfreezeTask" parameterType="com.citic.server.gdjg.domain.Br57_kzqq_input"
		resultType="String">
		select kzfkjg from br57_kzqq_back where thawseq =
		#{thawseq} and uniqueid = #{uniqueid} and caseno = #{caseno}
		and docno != #{docno}
	</select>
</mapper> 