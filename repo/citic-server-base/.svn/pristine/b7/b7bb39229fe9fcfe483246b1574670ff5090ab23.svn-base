<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.citic.server.mapper.MC00_triger_factMapper">

	<select id="getMC00_triger_factList" parameterType="string" resultType="MC00_triger_fact">
		select t.trigerid,t.trigercondid,t.datatime,t.freq,t.dsid
		  from mc00_triger_fact t
		  where t.datatime=#{datatime}
		  order by t.trigerid,t.trigercondid asc
	</select>
<insert id="insertMC00_triger_fact_his" parameterType="string">
		insert into MC00_triger_fact_his(
		trigerid,trigercondid,datatime,freq,dsid)
		select trigerid,trigercondid,datatime,freq,dsid from MC00_triger_fact where datatime=#{datatime}
	</insert>
	<insert id="insertMC00_triger_fact" parameterType="MC00_triger_fact">
		insert into MC00_triger_fact(
		trigerid,trigercondid,datatime,freq,dsid)
		values(
		#{trigerid},#{trigercondid},#{datatime},#{freq},#{dsid}
		)
	</insert>
	
	<!-- 当某日的任务任务全部完成后，清理当日的数据（临时数据，不保存历史） -->
	<delete id="deleteMC00_triger_factByDatatime" parameterType="string">
		<![CDATA[ delete from mc00_triger_fact where datatime=#{datatime} ]]>
	</delete>
	<delete id="deleteMC00_triger_fact_hisByDatatime" parameterType="string">
		<![CDATA[ delete from mc00_triger_fact_his where datatime=#{datatime} ]]>
	</delete>
</mapper>


