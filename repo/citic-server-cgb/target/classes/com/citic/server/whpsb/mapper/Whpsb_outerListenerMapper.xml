<?xml version="1.0" encoding="UTF-8"?> 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.citic.server.whpsb.mapper.Whpsb_outerListenerMapper">

   <insert id="insertMC20_Task_Msg" parameterType="com.citic.server.service.domain.MC20_task_msg">
		insert into MC20_TASK_MSG(TASKKEY, CODE, BDHM, MSGPATH,MSGNAME,ATTACHPATH,
		ATTACHNAME, CREATEDT, PACKETKEY)
		values(#{taskkey}, #{code}, #{bdhm},
		#{msgpath},#{msgname},#{attachpath}, #{attachname}, #{createdt}, #{packetkey})
	</insert>

	<insert id="insertMC20_Task_Fact1" parameterType="com.citic.server.service.domain.MC20_Task_Fact1">
		insert into MC20_TASK_FACT1(TASKKEY, TASKID, SUBTASKID, TASKTYPE, DATATIME,
		BDHM, TASKOBJ, FREQ, TASKNAME, TASKCMD, TGROUPID, ISDYNA)
		values(#{taskKey}, #{taskID}, #{subTaskID}, #{taskType}, #{datatime},
		#{bdhm}, #{taskObj}, #{freq},
		#{taskName}, #{taskCMD}, #{tGroupID}, #{isDYNA})
	</insert>
	
	  <insert id="insertMC20_WS" parameterType="com.citic.server.gf.domain.MC20_WS">
        insert into MC20_WS(bdhm,wsbh,xh,wjmc,wjlx,wslb,md5,wspath) 
        values(#{bdhm},#{wsbh},#{xh},#{wjmc},#{wjlx},#{wslb},#{md5},#{wspath})
    </insert>
    
    <select id="selectBr51_cxqq_back_msg" resultType="com.citic.server.whpsb.domain.Br51_cxqq_back_msg">
        select xh,msgseq,msg_filename,msg_filepath,create_dt,status
        from br51_cxqq_back_msg
        where status='0'
      </select>
      
      <update id="updateBr51_cxqq_back_msg" parameterType="String">
          update br51_cxqq_back_msg set status='1'
          where msgseq=#{_parameter}
    </update>
    
     <update id="updateBr51_cxqq" parameterType="com.citic.server.whpsb.domain.Br51_cxqq">
          update br51_cxqq set status=#{status},last_up_dt=#{last_up_dt},feedback_time=#{feedback_time}
          where msgseq=#{msgseq}
     </update>
</mapper> 